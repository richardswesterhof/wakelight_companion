okay so basically:

when a new alarm is set (or changed), send a notification that the wakelight will be activated 30 minutes before the alarm
allow user to disable wakelight for this alarm
allow user to set schedule in which the wakelight should be enabled for alarms and outside it it should at most ask to enable wakelight
allow user to change the window before the alarm time in which the wakelight will start

do actual wakelight functionality

and since I already know this is gonna get ugly fast: refactor